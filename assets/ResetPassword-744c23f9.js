import{t as S,$ as N,a8 as q,a0 as p,a as v,y as M,I as w,a1 as R,C as $,j as s,a3 as c,N as o,O as u,a9 as E,D as L}from"./index-17b9bd68.js";import{e as k,W as D,M as F,L as m}from"./SignUp.styled-bbbd128b.js";import{S as W}from"./ForgotPassword.styled-3957055e.js";const O=()=>{const h=S(),l=N(),x=q(),n=new URLSearchParams(x.search),f=n.get("token"),_=n.get("id"),a=p.useMediaQuery({query:"(min-width: 768px)"}),r=p.useMediaQuery({query:"(min-width: 1439px)"}),{t:e}=v(),y=M().shape({new_password:w().min(8,e("resetPass.New password must be at least 8 characters")).max(64).required(e("resetPass.Password is required")),repeat_new_password:w().oneOf([R("new_password"),null],e("resetPass.Passwords don't match, please try again.")).min(8,e("resetPass.Password must be at least 8 characters")).required(e("resetPass.Confirm password is required"))}).required(),P=t=>{if(t.new_password!==t.repeat_new_password){o.Notify.warning("New password and repeated password are different",u);return}const j=t.new_password;h(E({token:f,id:_,password:j})).unwrap().then(()=>{o.Notify.success("Password was changed"),l("/signin")}).catch(b=>{o.Notify.failure(b.message,u)})},{register:i,handleSubmit:g,formState:{errors:d}}=$({mode:"onSubmit",resolver:L(y)});return s.jsx(k,{children:s.jsx(D,{children:s.jsxs("form",{onSubmit:g(P),children:[s.jsx(F,{}),s.jsxs(m,{children:[e("resetPass.Enter your new password"),":"]}),s.jsx(c,{error:d.new_password,register:i,id:"new_password",width:r?384:a?336:280}),s.jsxs(m,{children:[e("settingModal.Repeat new password"),":"]}),s.jsx(c,{error:d.repeat_new_password,register:i,id:"repeat_new_password",width:r?384:a?336:280}),s.jsx(W,{$width:r?"384px":a?"336px":"280px",type:"submit",children:e("save")})]})})})};export{O as default};
